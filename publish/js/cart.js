"use strict";var shoppingCart=JSON.parse(localStorage.getItem("shoppingCart"))||[];console.log(shoppingCart);var table=document.querySelector("table"),sum=document.getElementById("sum");function render(){var t=shoppingCart.every(function(t){return t.isChecked});console.log(t);var e='<thead>\n                <tr>\n                    <th class="product-subtotal"><input class="allCheck" type="checkbox" '+(t?"checked":"")+' >全选</th>\n                    <th class="product-thumbnail">图片</th>\n                    <th class="product-name">商品名</th>\n                    <th class="product-price">价格</th>\n                    <th class="product-quantity">数量</th>\n                    <th class="product-remove">删除商品</th>\n                        </tr>\n                </thead> \n                <tbody>';shoppingCart.forEach(function(t){e+='\n                   <tr>\n                       <td class="product-subtotal"><input data-id="'+t.goods_id+'" class="singleCheck" '+(t.isChecked?"checked":"")+' type="checkbox"/></td>\n                       <td class="product-thumbnail">\n                           <a href="product-virtual.html"><img src="'+t.goods_small_logo+'" alt="" /></a>\n                       </td>\n                       <td class="product-name" title="'+t.goods_name+'"><span style="display: inline-block;width: 300px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;">'+t.goods_name+'</span></td>\n                       <td class="product-price">'+t.goods_price+'</td>\n                       <td class="product-quantity">'+t.count+'<button type="button" class="btn increase" data-id="'+t.goods_id+'">+</button ><button type="button" data-id="'+t.goods_id+'" class="btn decrease">-</button></td>\n                       <td class="product-remove"><button type="button" class="close" aria-label="关闭">\n                    <span class="del" aria-hidden="true" data-id="'+t.goods_id+'" >&times;</span>\n                  </button></td>\n                \n        ',e+="</tbody>"}),shoppingCart.length||(e="<h1><a href='shop.html'>您的购物车空空如也，请去挑选一些商品吧！！！</a></h1>"),table.innerHTML=e}function checkin(){var e=0;shoppingCart.forEach(function(t){t.isChecked&&(e+=t.goods_price*t.count)}),sum.innerHTML="￥"+e,shoppingCart.length||(sum.parentNode.style.display="none")}function update(){localStorage.setItem("shoppingCart",JSON.stringify(shoppingCart))}render(),checkin(),table.onclick=function(e){if("allCheck"===e.target.className)return shoppingCart.forEach(function(t){t.isChecked=e.target.checked}),render(),void checkin();if("singleCheck"===e.target.className){var n=e.target.getAttribute("data-id"),t=shoppingCart.find(function(t){return t.goods_id===n});return console.log(t),t.isChecked=e.target.checked,render(),checkin(),void update()}if(e.target.className.includes("increase")){n=e.target.getAttribute("data-id");return(t=shoppingCart.find(function(t){return t.goods_id===n})).count++,render(),checkin(),void update()}if(e.target.className.includes("decrease")){n=e.target.getAttribute("data-id");return(t=shoppingCart.find(function(t){return t.goods_id===n})).count--,t.count<=0&&(t.count=0),render(),checkin(),void update()}if("del"===e.target.className){n=e.target.getAttribute("data-id");var a=shoppingCart.findIndex(function(t){return t.goods_id===n});return shoppingCart.splice(a,1),render(),checkin(),void update()}};